@{
    ViewData["Title"] = "Home Page";
}

@section Styles {
    <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
}


<div class="container">
    <h1 class="title">Expense Tracker</h1>

    <!-- Tab Navigation -->
    <div class="tabs">
        <button class="tab-button active" onclick="showView('month')">
            <i class="fas fa-calendar-alt"></i> Month View
        </button>
        <button class="tab-button" onclick="showView('week')">
            <i class="fas fa-calendar-week"></i> Week View
        </button>
    </div>

    <!-- Month View -->
    <div id="month-view" class="view active">
        <div class="view-header">
            <h2>Monthly Expenses</h2>
            <div class="total-expense">
                <span class="total-label">Total:</span>
                <span class="total-amount">$185.00</span>
            </div>
        </div>
        <div class="expense-grid">
            <div class="expense-card">
                <div class="expense-header">
                    <div class="expense-date-category">
                        <div class="expense-date">01 Jun 2025</div>
                        <div class="expense-category-badge food">Food</div>
                    </div>
                    <div class="expense-amount">$45.00</div>
                </div>
                <div class="expense-description">Dinner at restaurant</div>
                <div class="expense-actions">
                    <button class="action-btn edit"><i class="fas fa-pencil-alt"></i></button>
                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="expense-card">
                <div class="expense-header">
                    <div class="expense-date-category">
                        <div class="expense-date">05 Jun 2025</div>
                        <div class="expense-category-badge transport">Transport</div>
                    </div>
                    <div class="expense-amount">$20.00</div>
                </div>
                <div class="expense-description">Taxi to work</div>
                <div class="expense-actions">
                    <button class="action-btn edit"><i class="fas fa-pencil-alt"></i></button>
                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="expense-card">
                <div class="expense-header">
                    <div class="expense-date-category">
                        <div class="expense-date">10 Jun 2025</div>
                        <div class="expense-category-badge utilities">Utilities</div>
                    </div>
                    <div class="expense-amount">$120.00</div>
                </div>
                <div class="expense-description">Electricity bill</div>
                <div class="expense-actions">
                    <button class="action-btn note" onclick="openNoteModal()">
                        <i class="fas fa-sticky-note"></i>
                    </button>
                    <button class="action-btn edit"><i class="fas fa-pencil-alt"></i></button>
                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Week View -->
    <div id="week-view" class="view">
        <div class="view-header">
            <h2>Weekly Expenses</h2>
            <div class="total-expense">
                <span class="total-label">Total:</span>
                <span class="total-amount">$105.00</span>
            </div>
        </div>
        <div class="expense-grid">
            <div class="expense-card">
                <div class="expense-header">
                    <div class="expense-date-category">
                        <div class="expense-date">01 Jun 2025</div>
                        <div class="expense-category-badge food">Food</div>
                    </div>
                    <div class="expense-amount">$45.00</div>
                </div>
                <div class="expense-description">Dinner at restaurant</div>
                <div class="expense-actions">
                    <button class="action-btn edit"><i class="fas fa-pencil-alt"></i></button>
                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="expense-card">
                <div class="expense-header">
                    <div class="expense-date-category">
                        <div class="expense-date">02 Jun 2025</div>
                        <div class="expense-category-badge groceries">Groceries</div>
                    </div>
                    <div class="expense-amount">$60.00</div>
                </div>
                <div class="expense-description">Weekly shopping</div>
                <div class="expense-actions">
                    <button class="action-btn note" onclick="openNoteModal()">
                        <i class="fas fa-sticky-note"></i>
                    </button>
                    <button class="action-btn edit"><i class="fas fa-pencil-alt"></i></button>
                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                </div>

            </div>
        </div>
    </div>
    <div class="modal" id="note-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Add Note</h3>
            <form id="note-form">
                <div class="form-group">
                    <label for="note-budget">Budget</label>
                    <input type="number" step="0.01" id="note-budget" required>
                </div>
                <div class="form-group">
                    <label for="note-description">Description</label>
                    <textarea id="note-description" rows="3"></textarea>
                </div>
                <button type="submit" class="btn-primary">Save Note</button>
            </form>
        </div>
    </div>
</div>

<script>
    // Function to show/hide views
    function showView(viewName) {
        document.querySelectorAll('.view').forEach(view => {
            view.classList.remove('active');
        });
        document.querySelectorAll('.tab-button').forEach(button => {
            button.classList.remove('active');
        });

        document.getElementById(`${viewName}-view`).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // Note modal functions
    function openNoteModal() {
        document.getElementById('note-modal').style.display = 'block';
    }

    function closeNoteModal() {
        document.getElementById('note-modal').style.display = 'none';
    }

    // Close modal when clicking X or outside
    document.querySelector('.close-modal').addEventListener('click', closeNoteModal);
    window.addEventListener('click', (event) => {
        if (event.target === document.getElementById('note-modal')) {
            closeNoteModal();
        }
    });

    // Handle form submission
    document.getElementById('note-form').addEventListener('submit', (e) => {
        e.preventDefault();

        const budget = document.getElementById('note-budget').value;
        const description = document.getElementById('note-description').value;

        // Here you would typically send this data to your server
        console.log('Note saved:', { budget, description });

        // Close the modal and reset the form
        closeNoteModal();
        e.target.reset();

        // Show success message (you could implement this)
        alert('Note saved successfully!');
    });
</script>
